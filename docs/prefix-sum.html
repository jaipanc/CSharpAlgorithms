<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#57B747"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2026-02-07T22:58:27.008574"><title>âž• Prefix Sum | DSA using C#.NET</title><script type="application/json" id="virtual-toc-data">[{"id":"core-concepts","level":0,"title":"Core Concepts","anchor":"#core-concepts"},{"id":"visual-example-1d-array","level":0,"title":"Visual Example: 1D Array","anchor":"#visual-example-1d-array"},{"id":"c-implementation","level":0,"title":"C# Implementation","anchor":"#c-implementation"},{"id":"advanced-2d-prefix-sum-matrix","level":0,"title":"Advanced: 2D Prefix Sum (Matrix)","anchor":"#advanced-2d-prefix-sum-matrix"},{"id":"practice-problems","level":0,"title":"Practice Problems","anchor":"#practice-problems"},{"id":"common-code-snippets","level":0,"title":"Common Code Snippets","anchor":"#common-code-snippets"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.25.3-b857/app.css" rel="stylesheet"><link rel="icon" type="image/png" sizes="16x16" href="https://www.python.org/static/apple-touch-icon-144x144-precomposed.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="âž• Prefix Sum | DSA using C#.NET"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="DSA using C#.NET Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/https://github.com/jaipanc/CSharpAlgorithms/tree/master/docs/prefix-sum.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="âž• Prefix Sum | DSA using C#.NET"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/https://github.com/jaipanc/CSharpAlgorithms/tree/master/docs/prefix-sum.html#webpage",
    "url": "writerside-documentation/https://github.com/jaipanc/CSharpAlgorithms/tree/master/docs/prefix-sum.html",
    "name": "âž• Prefix Sum | DSA using C#.NET",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentationhttps://github.com/jaipanc/CSharpAlgorithms/tree/master/docs/#website",
    "url": "writerside-documentationhttps://github.com/jaipanc/CSharpAlgorithms/tree/master/docs/",
    "name": "DSA using C#.NET Help"
}</script><!-- End Schema.org --></head><body data-id="âž•-Prefix-Sum" data-main-title="âž• Prefix Sum" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>DSA using C#.NET  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="âž•-Prefix-Sum" id="âž•-Prefix-Sum.md">âž• Prefix Sum</h1><p id="-zi9ef3_3"><span class="control" id="-zi9ef3_10">Prefix Sum</span> is a powerful pre-computation technique used to calculate the sum of elements in a given range (subarray) in time, after an initialization.</p><section class="chapter"><h2 id="core-concepts" data-toc="core-concepts">Core Concepts</h2><p id="-zi9ef3_11">The core idea is to create a new array <code class="code" id="-zi9ef3_13">P</code> where <code class="code" id="-zi9ef3_14">P[i]</code> stores the sum of all elements from the start of the original array up to index <code class="code" id="-zi9ef3_15">i</code>.</p><section class="chapter"><h3 id="theformula" data-toc="theformula">TheFormula</h3><p id="-zi9ef3_16">Given an array <code class="code" id="-zi9ef3_20">A</code> of size :</p><ol class="list _decimal" id="-zi9ef3_17" type="1"><li class="list__item" id="-zi9ef3_21"><p id="-zi9ef3_23"><span class="control" id="-zi9ef3_24">Build:</span></p></li><li class="list__item" id="-zi9ef3_22"><p id="-zi9ef3_25"><span class="control" id="-zi9ef3_26">Range Query (L to R):</span></p></li></ol><aside class="prompt" data-type="tip" data-title="" id="-zi9ef3_18"><p id="-zi9ef3_27"><span class="control" id="-zi9ef3_28">Best Practice:</span> It is often easier to make the Prefix Sum array size <span class="control" id="-zi9ef3_29">N + 1</span>. This handles the edge case where <code class="code" id="-zi9ef3_30">L=0</code> automatically (so you don't step out of bounds checking <code class="code" id="-zi9ef3_31">P[-1]</code>).</p></aside></section></section><section class="chapter"><h2 id="visual-example-1d-array" data-toc="visual-example-1d-array">Visual Example: 1D Array</h2><p id="-zi9ef3_32">Let's visualize the transformation and a query. <span class="control" id="-zi9ef3_35">Input Array <code class="code" id="-zi9ef3_37">nums</code>:</span> <code class="code" id="-zi9ef3_36">[3, 1, 4, 2]</code></p><section class="chapter"><h3 id="1-construction" data-toc="1-construction">1. Construction</h3><p id="-zi9ef3_38">We build <code class="code" id="-zi9ef3_41">prefix</code> of size <code class="code" id="-zi9ef3_42">N+1</code>. Index <code class="code" id="-zi9ef3_43">0</code> is always <code class="code" id="-zi9ef3_44">0</code>.</p><p id="-zi9ef3_39"><span class="control" id="-zi9ef3_45">Formula:</span> <code class="code" id="-zi9ef3_46">prefix[i] = prefix[i-1] + nums[i-1]</code></p><div class="table-wrapper"><table class="wide" id="-zi9ef3_40"><thead><tr class="ijRowHead" id="-zi9ef3_47"><th id="-zi9ef3_51"><p>Index</p></th><th id="-zi9ef3_52"><p>0</p></th><th id="-zi9ef3_53"><p>1</p></th><th id="-zi9ef3_54"><p>2</p></th><th id="-zi9ef3_55"><p>3</p></th><th id="-zi9ef3_56"><p>4</p></th></tr></thead><tbody><tr id="-zi9ef3_48"><td id="-zi9ef3_57"><p><span class="control" id="-zi9ef3_63">Nums</span></p></td><td id="-zi9ef3_58"><p>-</p></td><td id="-zi9ef3_59"><p>3</p></td><td id="-zi9ef3_60"><p>1</p></td><td id="-zi9ef3_61"><p>4</p></td><td id="-zi9ef3_62"><p>2</p></td></tr><tr id="-zi9ef3_49"><td id="-zi9ef3_64"><p><span class="control" id="-zi9ef3_70">Prefix</span></p></td><td id="-zi9ef3_65"><p><span class="control" id="-zi9ef3_71">0</span></p></td><td id="-zi9ef3_66"><p><span class="control" id="-zi9ef3_72">3</span></p></td><td id="-zi9ef3_67"><p><span class="control" id="-zi9ef3_73">4</span></p></td><td id="-zi9ef3_68"><p><span class="control" id="-zi9ef3_74">8</span></p></td><td id="-zi9ef3_69"><p><span class="control" id="-zi9ef3_75">10</span></p></td></tr><tr id="-zi9ef3_50"><td id="-zi9ef3_76"><p><span class="emphasis" id="-zi9ef3_82">Logic</span></p></td><td id="-zi9ef3_77"><p>Init</p></td><td id="-zi9ef3_78"><p>0+3</p></td><td id="-zi9ef3_79"><p>3+1</p></td><td id="-zi9ef3_80"><p>4+4</p></td><td id="-zi9ef3_81"><p>8+2</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="2-range-query-visual" data-toc="2-range-query-visual">2. Range Query Visual</h3><p id="-zi9ef3_83"><span class="control" id="-zi9ef3_87">Task:</span> Calculate sum of <code class="code" id="-zi9ef3_88">nums</code> from index <span class="control" id="-zi9ef3_89">1 to 2</span> (values <code class="code" id="-zi9ef3_90">1</code> and <code class="code" id="-zi9ef3_91">4</code>). Target Sum: .</p><p id="-zi9ef3_84">Using the Prefix Array:</p><ul class="list _bullet" id="-zi9ef3_85"><li class="list__item" id="-zi9ef3_92"><p id="-zi9ef3_94"><span class="control" id="-zi9ef3_95">Right Bound (R=2):</span> We look at <code class="code" id="-zi9ef3_96">prefix[3]</code> (value 8). This represents sum <code class="code" id="-zi9ef3_97">3+1+4</code>.</p></li><li class="list__item" id="-zi9ef3_93"><p id="-zi9ef3_98"><span class="control" id="-zi9ef3_99">Left Bound (L=1):</span> We look at <code class="code" id="-zi9ef3_100">prefix[1]</code> (value 3). This represents sum <code class="code" id="-zi9ef3_101">3</code> (the part we want to remove).</p></li></ul></section></section><section class="chapter"><h2 id="c-implementation" data-toc="c-implementation">C# Implementation</h2><section class="chapter"><h3 id="1-basic-1d-implementation-n-1-approach" data-toc="1-basic-1d-implementation-n-1-approach">1. Basic 1D Implementation (N+1 Approach)</h3><p id="-zi9ef3_103">This is the standard pattern for handling range sum queries safely.</p><div class="code-block" data-lang="csharp">
public class PrefixSum
{
    private int[] _prefix;

    public PrefixSum(int[] nums)
    {
        // Size N + 1 prevents &quot;Index Out of Bounds&quot; for L=0
        _prefix = new int[nums.Length + 1];
        
        for (int i = 0; i &lt; nums.Length; i++)
        {
            _prefix[i + 1] = _prefix[i] + nums[i];
        }
    }

    // Query sum from index L to R (inclusive)
    public int Query(int L, int R)
    {
        return _prefix[R + 1] - _prefix[L];
    }
}

// Usage:
// int[] data = { 3, 1, 4, 2 };
// var ps = new PrefixSum(data);
// Console.WriteLine(ps.Query(1, 2)); // Output: 5 (1+4)

</div></section></section><section class="chapter"><h2 id="advanced-2d-prefix-sum-matrix" data-toc="advanced-2d-prefix-sum-matrix">Advanced: 2D Prefix Sum (Matrix)</h2><p id="-zi9ef3_106">Used for calculating the sum of a sub-rectangle in a matrix in .</p><section class="chapter"><h3 id="the-formula" data-toc="the-formula">The Formula</h3><p id="-zi9ef3_109">To find the sum of the rectangle defined by <code class="code" id="-zi9ef3_110">(r1, c1)</code> (top-left) and <code class="code" id="-zi9ef3_111">(r2, c2)</code> (bottom-right):</p></section><section class="chapter"><h3 id="code-snippet" data-toc="code-snippet">Code Snippet</h3><div class="code-block" data-lang="csharp">
public class NumMatrix 
{
    private int[,] _dp;

    public NumMatrix(int[][] matrix) 
    {
        int rows = matrix.Length;
        int cols = matrix[0].Length;
        // Create 2D array with padding
        _dp = new int[rows + 1, cols + 1];

        for (int r = 0; r &lt; rows; r++) 
        {
            for (int c = 0; c &lt; cols; c++) 
            {
                _dp[r + 1, c + 1] = _dp[r, c + 1] + _dp[r + 1, c] 
                                  + matrix[r][c] - _dp[r, c];
            }
        }
    }

    public int SumRegion(int row1, int col1, int row2, int col2) 
    {
        // Adjust indices to match padded DP array
        return _dp[row2 + 1, col2 + 1] 
             - _dp[row1, col2 + 1] 
             - _dp[row2 + 1, col1] 
             + _dp[row1, col1];
    }
}

</div></section></section><section class="chapter"><h2 id="practice-problems" data-toc="practice-problems">Practice Problems</h2><section class="chapter"><h3 id="leetcode" data-toc="leetcode">LeetCode</h3><div class="table-wrapper"><table class="wide" id="-zi9ef3_116"><thead><tr class="ijRowHead" id="-zi9ef3_117"><th id="-zi9ef3_124"><p>Difficulty</p></th><th id="-zi9ef3_125"><p>Problem</p></th><th id="-zi9ef3_126"><p>Concept</p></th></tr></thead><tbody><tr id="-zi9ef3_118"><td id="-zi9ef3_127"><p>ðŸŸ¢ Easy</p></td><td id="-zi9ef3_128"><p><a href="https://leetcode.com/problems/running-sum-of-1d-array/" id="-zi9ef3_130" data-external="true" rel="noopener noreferrer" target="_blank">1480. Running Sum of 1d Array</a></p></td><td id="-zi9ef3_129"><p>The absolute basics.</p></td></tr><tr id="-zi9ef3_119"><td id="-zi9ef3_131"><p>ðŸŸ¢ Easy</p></td><td id="-zi9ef3_132"><p><a href="https://leetcode.com/problems/find-pivot-index/" id="-zi9ef3_134" data-external="true" rel="noopener noreferrer" target="_blank">724. Find Pivot Index</a></p></td><td id="-zi9ef3_133"><p>Compare left sum vs right sum.</p></td></tr><tr id="-zi9ef3_120"><td id="-zi9ef3_135"><p>ðŸŸ¡ Medium</p></td><td id="-zi9ef3_136"><p><a href="https://leetcode.com/problems/subarray-sum-equals-k/" id="-zi9ef3_138" data-external="true" rel="noopener noreferrer" target="_blank">560. Subarray Sum Equals K</a></p></td><td id="-zi9ef3_137"><p><span class="control" id="-zi9ef3_139">Must Do.</span> Prefix Sum + Hash Map pattern.</p></td></tr><tr id="-zi9ef3_121"><td id="-zi9ef3_140"><p>ðŸŸ¡ Medium</p></td><td id="-zi9ef3_141"><p><a href="https://leetcode.com/problems/product-of-array-except-self/" id="-zi9ef3_143" data-external="true" rel="noopener noreferrer" target="_blank">238. Product of Array Except Self</a></p></td><td id="-zi9ef3_142"><p>Prefix Product + Suffix Product.</p></td></tr><tr id="-zi9ef3_122"><td id="-zi9ef3_144"><p>ðŸŸ¡ Medium</p></td><td id="-zi9ef3_145"><p><a href="https://leetcode.com/problems/range-sum-query-2d-immutable/" id="-zi9ef3_147" data-external="true" rel="noopener noreferrer" target="_blank">304. Range Sum Query 2D</a></p></td><td id="-zi9ef3_146"><p>Classic 2D matrix implementation.</p></td></tr><tr id="-zi9ef3_123"><td id="-zi9ef3_148"><p>ðŸŸ¡ Medium</p></td><td id="-zi9ef3_149"><p><a href="https://leetcode.com/problems/contiguous-array/" id="-zi9ef3_151" data-external="true" rel="noopener noreferrer" target="_blank">525. Contiguous Array</a></p></td><td id="-zi9ef3_150"><p>Using Prefix Sum with -1/1 transformation.</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="hackerrank" data-toc="hackerrank">HackerRank</h3><div class="table-wrapper"><table class="wide" id="-zi9ef3_152"><thead><tr class="ijRowHead" id="-zi9ef3_154"><th id="-zi9ef3_157"><p>Difficulty</p></th><th id="-zi9ef3_158"><p>Problem</p></th><th id="-zi9ef3_159"><p>Concept</p></th></tr></thead><tbody><tr id="-zi9ef3_155"><td id="-zi9ef3_160"><p>ðŸŸ¡ Medium</p></td><td id="-zi9ef3_161"><p><a href="https://www.hackerrank.com/challenges/crush/problem" id="-zi9ef3_163" data-external="true" rel="noopener noreferrer" target="_blank">Array Manipulation</a></p></td><td id="-zi9ef3_162"><p><span class="control" id="-zi9ef3_164">Difference Array</span> (Reverse Prefix Sum). Highly recommended.</p></td></tr><tr id="-zi9ef3_156"><td id="-zi9ef3_165"><p>ðŸŸ¡ Medium</p></td><td id="-zi9ef3_166"><p><a href="https://www.hackerrank.com/challenges/sherlock-and-array/problem" id="-zi9ef3_168" data-external="true" rel="noopener noreferrer" target="_blank">Sherlock and Array</a></p></td><td id="-zi9ef3_167"><p>Finding equilibrium point.</p></td></tr></tbody></table></div></section></section><section class="chapter"><h2 id="common-code-snippets" data-toc="common-code-snippets">Common Code Snippets</h2><section class="chapter"><h3 id="1-prefix-sum-hash-map-target-sum" data-toc="1-prefix-sum-hash-map-target-sum">1. Prefix Sum + Hash Map (Target Sum)</h3><p id="-zi9ef3_171">Used to find how many subarrays sum to <code class="code" id="-zi9ef3_173">k</code>.</p><div class="code-block" data-lang="csharp">
public int SubarraySum(int[] nums, int k) {
    int count = 0, sum = 0;
    // Map stores &lt;CurrentSum, Frequency&gt;
    var map = new Dictionary&lt;int, int&gt; { { 0, 1 } };

    foreach (int num in nums) {
        sum += num;
        if (map.ContainsKey(sum - k)) {
            count += map[sum - k];
        }
        
        if (!map.ContainsKey(sum)) map[sum] = 0;
        map[sum]++;
    }
    return count;
}

</div></section><section class="chapter"><h3 id="2-difference-array-range-updates" data-toc="2-difference-array-range-updates">2. Difference Array (Range Updates)</h3><p id="-zi9ef3_174">If you need to update a range <code class="code" id="-zi9ef3_176">[L, R]</code> by adding <code class="code" id="-zi9ef3_177">val</code> efficiently ( updates), use a Difference Array.</p><div class="code-block" data-lang="csharp">
// To add 'val' to range [L, R]:
diff[L] += val;
if (R + 1 &lt; diff.Length) {
    diff[R + 1] -= val;
}

// To get final array, run a standard prefix sum over the 'diff' array

</div></section></section><div class="last-modified">17 January 2026</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="introduction.html" class="navigation-links__prev">ðŸ“š Introduction</a><a href="two-pointers.html" class="navigation-links__next">ðŸ‘‰ Two Pointers</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.25.3-b857/app.js"></script></body></html>