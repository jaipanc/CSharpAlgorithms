<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#57B747"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2026-01-25T23:46:46.0317938"><title>âž• Prefix Sum | DSA using C#.NET</title><script type="application/json" id="virtual-toc-data">[{"id":"core-concepts","level":0,"title":"Core Concepts","anchor":"#core-concepts"},{"id":"visual-example-1d-array","level":0,"title":"Visual Example: 1D Array","anchor":"#visual-example-1d-array"},{"id":"c-implementation","level":0,"title":"C# Implementation","anchor":"#c-implementation"},{"id":"advanced-2d-prefix-sum-matrix","level":0,"title":"Advanced: 2D Prefix Sum (Matrix)","anchor":"#advanced-2d-prefix-sum-matrix"},{"id":"practice-problems","level":0,"title":"Practice Problems","anchor":"#practice-problems"},{"id":"common-code-snippets","level":0,"title":"Common Code Snippets","anchor":"#common-code-snippets"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.25.3-b857/app.css" rel="stylesheet"><link rel="icon" type="image/png" sizes="16x16" href="https://www.python.org/static/apple-touch-icon-144x144-precomposed.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="âž• Prefix Sum | DSA using C#.NET"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="DSA using C#.NET Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/https://github.com/jaipanc/CSharpAlgorithms/tree/master/docs/prefix-sum.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="âž• Prefix Sum | DSA using C#.NET"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/https://github.com/jaipanc/CSharpAlgorithms/tree/master/docs/prefix-sum.html#webpage",
    "url": "writerside-documentation/https://github.com/jaipanc/CSharpAlgorithms/tree/master/docs/prefix-sum.html",
    "name": "âž• Prefix Sum | DSA using C#.NET",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentationhttps://github.com/jaipanc/CSharpAlgorithms/tree/master/docs/#website",
    "url": "writerside-documentationhttps://github.com/jaipanc/CSharpAlgorithms/tree/master/docs/",
    "name": "DSA using C#.NET Help"
}</script><!-- End Schema.org --></head><body data-id="âž•-Prefix-Sum" data-main-title="âž• Prefix Sum" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>DSA using C#.NET  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="âž•-Prefix-Sum" id="âž•-Prefix-Sum.md">âž• Prefix Sum</h1><p id="z52h2a4_3"><span class="control" id="z52h2a4_10">Prefix Sum</span> is a powerful pre-computation technique used to calculate the sum of elements in a given range (subarray) in time, after an initialization.</p><section class="chapter"><h2 id="core-concepts" data-toc="core-concepts">Core Concepts</h2><p id="z52h2a4_11">The core idea is to create a new array <code class="code" id="z52h2a4_13">P</code> where <code class="code" id="z52h2a4_14">P[i]</code> stores the sum of all elements from the start of the original array up to index <code class="code" id="z52h2a4_15">i</code>.</p><section class="chapter"><h3 id="theformula" data-toc="theformula">TheFormula</h3><p id="z52h2a4_16">Given an array <code class="code" id="z52h2a4_20">A</code> of size :</p><ol class="list _decimal" id="z52h2a4_17" type="1"><li class="list__item" id="z52h2a4_21"><p id="z52h2a4_23"><span class="control" id="z52h2a4_24">Build:</span></p></li><li class="list__item" id="z52h2a4_22"><p id="z52h2a4_25"><span class="control" id="z52h2a4_26">Range Query (L to R):</span></p></li></ol><aside class="prompt" data-type="tip" data-title="" id="z52h2a4_18"><p id="z52h2a4_27"><span class="control" id="z52h2a4_28">Best Practice:</span> It is often easier to make the Prefix Sum array size <span class="control" id="z52h2a4_29">N + 1</span>. This handles the edge case where <code class="code" id="z52h2a4_30">L=0</code> automatically (so you don't step out of bounds checking <code class="code" id="z52h2a4_31">P[-1]</code>).</p></aside></section></section><section class="chapter"><h2 id="visual-example-1d-array" data-toc="visual-example-1d-array">Visual Example: 1D Array</h2><p id="z52h2a4_32">Let's visualize the transformation and a query. <span class="control" id="z52h2a4_35">Input Array <code class="code" id="z52h2a4_37">nums</code>:</span> <code class="code" id="z52h2a4_36">[3, 1, 4, 2]</code></p><section class="chapter"><h3 id="1-construction" data-toc="1-construction">1. Construction</h3><p id="z52h2a4_38">We build <code class="code" id="z52h2a4_41">prefix</code> of size <code class="code" id="z52h2a4_42">N+1</code>. Index <code class="code" id="z52h2a4_43">0</code> is always <code class="code" id="z52h2a4_44">0</code>.</p><p id="z52h2a4_39"><span class="control" id="z52h2a4_45">Formula:</span> <code class="code" id="z52h2a4_46">prefix[i] = prefix[i-1] + nums[i-1]</code></p><div class="table-wrapper"><table class="wide" id="z52h2a4_40"><thead><tr class="ijRowHead" id="z52h2a4_47"><th id="z52h2a4_51"><p>Index</p></th><th id="z52h2a4_52"><p>0</p></th><th id="z52h2a4_53"><p>1</p></th><th id="z52h2a4_54"><p>2</p></th><th id="z52h2a4_55"><p>3</p></th><th id="z52h2a4_56"><p>4</p></th></tr></thead><tbody><tr id="z52h2a4_48"><td id="z52h2a4_57"><p><span class="control" id="z52h2a4_63">Nums</span></p></td><td id="z52h2a4_58"><p>-</p></td><td id="z52h2a4_59"><p>3</p></td><td id="z52h2a4_60"><p>1</p></td><td id="z52h2a4_61"><p>4</p></td><td id="z52h2a4_62"><p>2</p></td></tr><tr id="z52h2a4_49"><td id="z52h2a4_64"><p><span class="control" id="z52h2a4_70">Prefix</span></p></td><td id="z52h2a4_65"><p><span class="control" id="z52h2a4_71">0</span></p></td><td id="z52h2a4_66"><p><span class="control" id="z52h2a4_72">3</span></p></td><td id="z52h2a4_67"><p><span class="control" id="z52h2a4_73">4</span></p></td><td id="z52h2a4_68"><p><span class="control" id="z52h2a4_74">8</span></p></td><td id="z52h2a4_69"><p><span class="control" id="z52h2a4_75">10</span></p></td></tr><tr id="z52h2a4_50"><td id="z52h2a4_76"><p><span class="emphasis" id="z52h2a4_82">Logic</span></p></td><td id="z52h2a4_77"><p>Init</p></td><td id="z52h2a4_78"><p>0+3</p></td><td id="z52h2a4_79"><p>3+1</p></td><td id="z52h2a4_80"><p>4+4</p></td><td id="z52h2a4_81"><p>8+2</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="2-range-query-visual" data-toc="2-range-query-visual">2. Range Query Visual</h3><p id="z52h2a4_83"><span class="control" id="z52h2a4_87">Task:</span> Calculate sum of <code class="code" id="z52h2a4_88">nums</code> from index <span class="control" id="z52h2a4_89">1 to 2</span> (values <code class="code" id="z52h2a4_90">1</code> and <code class="code" id="z52h2a4_91">4</code>). Target Sum: .</p><p id="z52h2a4_84">Using the Prefix Array:</p><ul class="list _bullet" id="z52h2a4_85"><li class="list__item" id="z52h2a4_92"><p id="z52h2a4_94"><span class="control" id="z52h2a4_95">Right Bound (R=2):</span> We look at <code class="code" id="z52h2a4_96">prefix[3]</code> (value 8). This represents sum <code class="code" id="z52h2a4_97">3+1+4</code>.</p></li><li class="list__item" id="z52h2a4_93"><p id="z52h2a4_98"><span class="control" id="z52h2a4_99">Left Bound (L=1):</span> We look at <code class="code" id="z52h2a4_100">prefix[1]</code> (value 3). This represents sum <code class="code" id="z52h2a4_101">3</code> (the part we want to remove).</p></li></ul></section></section><section class="chapter"><h2 id="c-implementation" data-toc="c-implementation">C# Implementation</h2><section class="chapter"><h3 id="1-basic-1d-implementation-n-1-approach" data-toc="1-basic-1d-implementation-n-1-approach">1. Basic 1D Implementation (N+1 Approach)</h3><p id="z52h2a4_103">This is the standard pattern for handling range sum queries safely.</p><div class="code-block" data-lang="csharp">
public class PrefixSum
{
    private int[] _prefix;

    public PrefixSum(int[] nums)
    {
        // Size N + 1 prevents &quot;Index Out of Bounds&quot; for L=0
        _prefix = new int[nums.Length + 1];
        
        for (int i = 0; i &lt; nums.Length; i++)
        {
            _prefix[i + 1] = _prefix[i] + nums[i];
        }
    }

    // Query sum from index L to R (inclusive)
    public int Query(int L, int R)
    {
        return _prefix[R + 1] - _prefix[L];
    }
}

// Usage:
// int[] data = { 3, 1, 4, 2 };
// var ps = new PrefixSum(data);
// Console.WriteLine(ps.Query(1, 2)); // Output: 5 (1+4)

</div></section></section><section class="chapter"><h2 id="advanced-2d-prefix-sum-matrix" data-toc="advanced-2d-prefix-sum-matrix">Advanced: 2D Prefix Sum (Matrix)</h2><p id="z52h2a4_106">Used for calculating the sum of a sub-rectangle in a matrix in .</p><section class="chapter"><h3 id="the-formula" data-toc="the-formula">The Formula</h3><p id="z52h2a4_109">To find the sum of the rectangle defined by <code class="code" id="z52h2a4_110">(r1, c1)</code> (top-left) and <code class="code" id="z52h2a4_111">(r2, c2)</code> (bottom-right):</p></section><section class="chapter"><h3 id="code-snippet" data-toc="code-snippet">Code Snippet</h3><div class="code-block" data-lang="csharp">
public class NumMatrix 
{
    private int[,] _dp;

    public NumMatrix(int[][] matrix) 
    {
        int rows = matrix.Length;
        int cols = matrix[0].Length;
        // Create 2D array with padding
        _dp = new int[rows + 1, cols + 1];

        for (int r = 0; r &lt; rows; r++) 
        {
            for (int c = 0; c &lt; cols; c++) 
            {
                _dp[r + 1, c + 1] = _dp[r, c + 1] + _dp[r + 1, c] 
                                  + matrix[r][c] - _dp[r, c];
            }
        }
    }

    public int SumRegion(int row1, int col1, int row2, int col2) 
    {
        // Adjust indices to match padded DP array
        return _dp[row2 + 1, col2 + 1] 
             - _dp[row1, col2 + 1] 
             - _dp[row2 + 1, col1] 
             + _dp[row1, col1];
    }
}

</div></section></section><section class="chapter"><h2 id="practice-problems" data-toc="practice-problems">Practice Problems</h2><section class="chapter"><h3 id="leetcode" data-toc="leetcode">LeetCode</h3><div class="table-wrapper"><table class="wide" id="z52h2a4_116"><thead><tr class="ijRowHead" id="z52h2a4_117"><th id="z52h2a4_124"><p>Difficulty</p></th><th id="z52h2a4_125"><p>Problem</p></th><th id="z52h2a4_126"><p>Concept</p></th></tr></thead><tbody><tr id="z52h2a4_118"><td id="z52h2a4_127"><p>ðŸŸ¢ Easy</p></td><td id="z52h2a4_128"><p><a href="https://leetcode.com/problems/running-sum-of-1d-array/" id="z52h2a4_130" data-external="true" rel="noopener noreferrer" target="_blank">1480. Running Sum of 1d Array</a></p></td><td id="z52h2a4_129"><p>The absolute basics.</p></td></tr><tr id="z52h2a4_119"><td id="z52h2a4_131"><p>ðŸŸ¢ Easy</p></td><td id="z52h2a4_132"><p><a href="https://leetcode.com/problems/find-pivot-index/" id="z52h2a4_134" data-external="true" rel="noopener noreferrer" target="_blank">724. Find Pivot Index</a></p></td><td id="z52h2a4_133"><p>Compare left sum vs right sum.</p></td></tr><tr id="z52h2a4_120"><td id="z52h2a4_135"><p>ðŸŸ¡ Medium</p></td><td id="z52h2a4_136"><p><a href="https://leetcode.com/problems/subarray-sum-equals-k/" id="z52h2a4_138" data-external="true" rel="noopener noreferrer" target="_blank">560. Subarray Sum Equals K</a></p></td><td id="z52h2a4_137"><p><span class="control" id="z52h2a4_139">Must Do.</span> Prefix Sum + Hash Map pattern.</p></td></tr><tr id="z52h2a4_121"><td id="z52h2a4_140"><p>ðŸŸ¡ Medium</p></td><td id="z52h2a4_141"><p><a href="https://leetcode.com/problems/product-of-array-except-self/" id="z52h2a4_143" data-external="true" rel="noopener noreferrer" target="_blank">238. Product of Array Except Self</a></p></td><td id="z52h2a4_142"><p>Prefix Product + Suffix Product.</p></td></tr><tr id="z52h2a4_122"><td id="z52h2a4_144"><p>ðŸŸ¡ Medium</p></td><td id="z52h2a4_145"><p><a href="https://leetcode.com/problems/range-sum-query-2d-immutable/" id="z52h2a4_147" data-external="true" rel="noopener noreferrer" target="_blank">304. Range Sum Query 2D</a></p></td><td id="z52h2a4_146"><p>Classic 2D matrix implementation.</p></td></tr><tr id="z52h2a4_123"><td id="z52h2a4_148"><p>ðŸŸ¡ Medium</p></td><td id="z52h2a4_149"><p><a href="https://leetcode.com/problems/contiguous-array/" id="z52h2a4_151" data-external="true" rel="noopener noreferrer" target="_blank">525. Contiguous Array</a></p></td><td id="z52h2a4_150"><p>Using Prefix Sum with -1/1 transformation.</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="hackerrank" data-toc="hackerrank">HackerRank</h3><div class="table-wrapper"><table class="wide" id="z52h2a4_152"><thead><tr class="ijRowHead" id="z52h2a4_154"><th id="z52h2a4_157"><p>Difficulty</p></th><th id="z52h2a4_158"><p>Problem</p></th><th id="z52h2a4_159"><p>Concept</p></th></tr></thead><tbody><tr id="z52h2a4_155"><td id="z52h2a4_160"><p>ðŸŸ¡ Medium</p></td><td id="z52h2a4_161"><p><a href="https://www.hackerrank.com/challenges/crush/problem" id="z52h2a4_163" data-external="true" rel="noopener noreferrer" target="_blank">Array Manipulation</a></p></td><td id="z52h2a4_162"><p><span class="control" id="z52h2a4_164">Difference Array</span> (Reverse Prefix Sum). Highly recommended.</p></td></tr><tr id="z52h2a4_156"><td id="z52h2a4_165"><p>ðŸŸ¡ Medium</p></td><td id="z52h2a4_166"><p><a href="https://www.hackerrank.com/challenges/sherlock-and-array/problem" id="z52h2a4_168" data-external="true" rel="noopener noreferrer" target="_blank">Sherlock and Array</a></p></td><td id="z52h2a4_167"><p>Finding equilibrium point.</p></td></tr></tbody></table></div></section></section><section class="chapter"><h2 id="common-code-snippets" data-toc="common-code-snippets">Common Code Snippets</h2><section class="chapter"><h3 id="1-prefix-sum-hash-map-target-sum" data-toc="1-prefix-sum-hash-map-target-sum">1. Prefix Sum + Hash Map (Target Sum)</h3><p id="z52h2a4_171">Used to find how many subarrays sum to <code class="code" id="z52h2a4_173">k</code>.</p><div class="code-block" data-lang="csharp">
public int SubarraySum(int[] nums, int k) {
    int count = 0, sum = 0;
    // Map stores &lt;CurrentSum, Frequency&gt;
    var map = new Dictionary&lt;int, int&gt; { { 0, 1 } };

    foreach (int num in nums) {
        sum += num;
        if (map.ContainsKey(sum - k)) {
            count += map[sum - k];
        }
        
        if (!map.ContainsKey(sum)) map[sum] = 0;
        map[sum]++;
    }
    return count;
}

</div></section><section class="chapter"><h3 id="2-difference-array-range-updates" data-toc="2-difference-array-range-updates">2. Difference Array (Range Updates)</h3><p id="z52h2a4_174">If you need to update a range <code class="code" id="z52h2a4_176">[L, R]</code> by adding <code class="code" id="z52h2a4_177">val</code> efficiently ( updates), use a Difference Array.</p><div class="code-block" data-lang="csharp">
// To add 'val' to range [L, R]:
diff[L] += val;
if (R + 1 &lt; diff.Length) {
    diff[R + 1] -= val;
}

// To get final array, run a standard prefix sum over the 'diff' array

</div></section></section><div class="last-modified">17 January 2026</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="introduction.html" class="navigation-links__prev">ðŸ“š Introduction</a><a href="two-pointers.html" class="navigation-links__next">ðŸ‘‰ Two Pointers</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.25.3-b857/app.js"></script></body></html>